"use strict";
(self["webpackChunknextcloud"] = self["webpackChunknextcloud"] || []).push([["node_modules_nextcloud_upload_dist_chunks_ConflictPicker-Bif6rCp6_mjs"],{

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/@nextcloud/upload/dist/assets/ConflictPicker-BVcoqXxT.css":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/@nextcloud/upload/dist/assets/ConflictPicker-BVcoqXxT.css ***!
  \**********************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../css-loader/dist/runtime/noSourceMaps.js */ "./node_modules/css-loader/dist/runtime/noSourceMaps.js");
/* harmony import */ var _css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, `.node-picker__wrapper[data-v-f85db9fe]:not(:last-of-type) {
  border-bottom: 1px solid var(--color-border);
}
.node-picker[data-v-f85db9fe] {
  display: flex;
  align-items: center;
  height: 64px;
}
.node-picker__icon[data-v-f85db9fe],
.node-picker__preview[data-v-f85db9fe] {
  height: 64px;
  width: 64px;
  margin: 0 var(--secondary-margin);
  display: block;
  flex: 0 0 64px;
}
.node-picker__icon[data-v-f85db9fe] {
  color: var(--color-text-maxcontrast);
}
.node-picker__icon.folder-icon[data-v-f85db9fe] {
  color: var(--color-primary-element);
}
.node-picker__preview[data-v-f85db9fe] {
  overflow: hidden;
  border-radius: calc(var(--border-radius) * 2);
  background-position: center;
  background-size: cover;
}
.node-picker__desc[data-v-f85db9fe] {
  display: flex;
  flex-direction: column;
}
.node-picker__desc span[data-v-f85db9fe] {
  white-space: nowrap;
}
[data-v-12c4204f] .modal-container__content {
  display: flex;
  overflow: visible;
  flex-direction: column;
}
.conflict-picker[data-v-12c4204f] {
  --margin: 36px;
  --secondary-margin: 18px;
}
.conflict-picker__header[data-v-12c4204f] {
  position: sticky;
  z-index: 10;
  top: 0;
  padding: 0 var(--margin);
  padding-bottom: var(--secondary-margin);
}
.conflict-picker__form[data-v-12c4204f] {
  position: relative;
  overflow: auto;
  padding: 0 var(--margin);
  margin-top: calc(-1 * var(--secondary-margin));
}
.conflict-picker fieldset[data-v-12c4204f] {
  display: grid;
  width: 100%;
  margin-top: calc(var(--secondary-margin) * 1.5);
  padding-bottom: var(--secondary-margin);
  grid-template-columns: 1fr 1fr;
}
.conflict-picker fieldset[data-v-12c4204f] legend {
  display: flex;
  align-items: center;
  width: 100%;
  margin-bottom: calc(var(--secondary-margin) / 2);
}
.conflict-picker fieldset.conflict-picker__all[data-v-12c4204f] {
  position: sticky;
  top: 0;
  margin: 0;
  padding: var(--secondary-margin) 0;
  background-image:
    linear-gradient(
      to top,
      transparent,
      var(--color-main-background-blur) 10%,
      var(--color-main-background) 15%);
}
.conflict-picker fieldset.conflict-picker__all + fieldset[data-v-12c4204f] {
  margin-top: 0;
}
.conflict-picker fieldset.conflict-picker__all[data-v-12c4204f] label {
  font-weight: 700;
}
.conflict-picker .button-vue--disabled[data-v-12c4204f] {
  cursor: default;
  opacity: .5;
  filter: saturate(.7);
}
.conflict-picker[data-v-12c4204f] .dialog__actions {
  width: auto;
  margin-inline: 12px;
}
.conflict-picker[data-v-12c4204f] .dialog__actions span.dialog__actions-separator {
  margin-left: auto;
}
@media screen and (max-width: 768px) {
  .conflict-picker[data-v-12c4204f] {
    --margin: var(--secondary-margin) !important;
  }
  .conflict-picker__description[data-v-12c4204f] {
    display: none !important;
  }
  .conflict-picker fieldset[data-v-12c4204f] {
    grid-template-columns: 1fr !important;
  }
  .conflict-picker fieldset.conflict-picker__all[data-v-12c4204f] {
    position: static;
  }
}
@media screen and (max-width: 512px) {
  .conflict-picker[data-v-12c4204f] .dialog__actions {
    flex-wrap: wrap;
  }
  .conflict-picker[data-v-12c4204f] .dialog__actions span.dialog__actions-separator {
    width: 100%;
  }
}
`, ""]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/@nextcloud/upload/dist/assets/ConflictPicker-BVcoqXxT.css":
/*!********************************************************************************!*\
  !*** ./node_modules/@nextcloud/upload/dist/assets/ConflictPicker-BVcoqXxT.css ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");
/* harmony import */ var _style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");
/* harmony import */ var _style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");
/* harmony import */ var _style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");
/* harmony import */ var _style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");
/* harmony import */ var _style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _css_loader_dist_cjs_js_ConflictPicker_BVcoqXxT_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../../../css-loader/dist/cjs.js!./ConflictPicker-BVcoqXxT.css */ "./node_modules/css-loader/dist/cjs.js!./node_modules/@nextcloud/upload/dist/assets/ConflictPicker-BVcoqXxT.css");

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());

      options.insert = _style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
    
options.domAPI = (_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_css_loader_dist_cjs_js_ConflictPicker_BVcoqXxT_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_css_loader_dist_cjs_js_ConflictPicker_BVcoqXxT_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _css_loader_dist_cjs_js_ConflictPicker_BVcoqXxT_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _css_loader_dist_cjs_js_ConflictPicker_BVcoqXxT_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ "./node_modules/@nextcloud/upload/dist/chunks/ConflictPicker-Bif6rCp6.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@nextcloud/upload/dist/chunks/ConflictPicker-Bif6rCp6.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ae)
/* harmony export */ });
/* harmony import */ var _assets_ConflictPicker_BVcoqXxT_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../assets/ConflictPicker-BVcoqXxT.css */ "./node_modules/@nextcloud/upload/dist/assets/ConflictPicker-BVcoqXxT.css");
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ "./node_modules/path/path.js");
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _nextcloud_files__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nextcloud/files */ "./node_modules/@nextcloud/files/dist/index.mjs");
/* harmony import */ var _nextcloud_dialogs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nextcloud/dialogs */ "./node_modules/@nextcloud/dialogs/dist/index.mjs");
/* harmony import */ var _index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index-DM2X1kc6.mjs */ "./node_modules/@nextcloud/upload/dist/chunks/index-DM2X1kc6.mjs");
/* harmony import */ var _nextcloud_vue_dist_Components_NcCheckboxRadioSwitch_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @nextcloud/vue/dist/Components/NcCheckboxRadioSwitch.js */ "./node_modules/@nextcloud/vue/dist/Components/NcCheckboxRadioSwitch.mjs");
/* harmony import */ var _nextcloud_vue_dist_Components_NcDialog_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @nextcloud/vue/dist/Components/NcDialog.js */ "./node_modules/@nextcloud/vue/dist/Components/NcDialog.mjs");
/* harmony import */ var _nextcloud_vue_dist_Components_NcButton_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @nextcloud/vue/dist/Components/NcButton.js */ "./node_modules/@nextcloud/vue/dist/Components/NcButton.mjs");
/* harmony import */ var _nextcloud_router__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @nextcloud/router */ "./node_modules/@nextcloud/router/dist/index.mjs");
/* harmony import */ var _nextcloud_vue_dist_Components_NcDateTime_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @nextcloud/vue/dist/Components/NcDateTime.js */ "./node_modules/@nextcloud/vue/dist/Components/NcDateTime.mjs");











const b = {
  name: "ArrowRightIcon",
  emits: ["click"],
  props: {
    title: {
      type: String
    },
    fillColor: {
      type: String,
      default: "currentColor"
    },
    size: {
      type: Number,
      default: 24
    }
  }
};
var x = function() {
  var e = this, t = e._self._c;
  return t("span", e._b({ staticClass: "material-design-icon arrow-right-icon", attrs: { "aria-hidden": e.title ? null : !0, "aria-label": e.title, role: "img" }, on: { click: function(s) {
    return e.$emit("click", s);
  } } }, "span", e.$attrs, !1), [t("svg", { staticClass: "material-design-icon__svg", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: "0 0 24 24" } }, [t("path", { attrs: { d: "M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" } }, [e.title ? t("title", [e._v(e._s(e.title))]) : e._e()])])]);
}, N = [], $ = /* @__PURE__ */ (0,_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.n)(
  b,
  x,
  N,
  !1,
  null,
  null,
  null,
  null
);
const L = $.exports, z = {
  name: "CloseIcon",
  emits: ["click"],
  props: {
    title: {
      type: String
    },
    fillColor: {
      type: String,
      default: "currentColor"
    },
    size: {
      type: Number,
      default: 24
    }
  }
};
var F = function() {
  var e = this, t = e._self._c;
  return t("span", e._b({ staticClass: "material-design-icon close-icon", attrs: { "aria-hidden": e.title ? null : !0, "aria-label": e.title, role: "img" }, on: { click: function(s) {
    return e.$emit("click", s);
  } } }, "span", e.$attrs, !1), [t("svg", { staticClass: "material-design-icon__svg", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: "0 0 24 24" } }, [t("path", { attrs: { d: "M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" } }, [e.title ? t("title", [e._v(e._s(e.title))]) : e._e()])])]);
}, P = [], A = /* @__PURE__ */ (0,_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.n)(
  z,
  F,
  P,
  !1,
  null,
  null,
  null,
  null
);
const R = A.exports, I = {
  name: "FileIcon",
  emits: ["click"],
  props: {
    title: {
      type: String
    },
    fillColor: {
      type: String,
      default: "currentColor"
    },
    size: {
      type: Number,
      default: 24
    }
  }
};
var B = function() {
  var e = this, t = e._self._c;
  return t("span", e._b({ staticClass: "material-design-icon file-icon", attrs: { "aria-hidden": e.title ? null : !0, "aria-label": e.title, role: "img" }, on: { click: function(s) {
    return e.$emit("click", s);
  } } }, "span", e.$attrs, !1), [t("svg", { staticClass: "material-design-icon__svg", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: "0 0 24 24" } }, [t("path", { attrs: { d: "M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z" } }, [e.title ? t("title", [e._v(e._s(e.title))]) : e._e()])])]);
}, E = [], O = /* @__PURE__ */ (0,_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.n)(
  I,
  B,
  E,
  !1,
  null,
  null,
  null,
  null
);
const M = O.exports, U = {
  name: "FolderIcon",
  emits: ["click"],
  props: {
    title: {
      type: String
    },
    fillColor: {
      type: String,
      default: "currentColor"
    },
    size: {
      type: Number,
      default: 24
    }
  }
};
var V = function() {
  var e = this, t = e._self._c;
  return t("span", e._b({ staticClass: "material-design-icon folder-icon", attrs: { "aria-hidden": e.title ? null : !0, "aria-label": e.title, role: "img" }, on: { click: function(s) {
    return e.$emit("click", s);
  } } }, "span", e.$attrs, !1), [t("svg", { staticClass: "material-design-icon__svg", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: "0 0 24 24" } }, [t("path", { attrs: { d: "M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z" } }, [e.title ? t("title", [e._v(e._s(e.title))]) : e._e()])])]);
}, q = [], D = /* @__PURE__ */ (0,_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.n)(
  U,
  V,
  q,
  !1,
  null,
  null,
  null,
  null
);
const T = D.exports, h = 64, H = (0,vue__WEBPACK_IMPORTED_MODULE_10__.defineComponent)({
  name: "NodesPicker",
  components: {
    FileSvg: M,
    FolderSvg: T,
    NcCheckboxRadioSwitch: _nextcloud_vue_dist_Components_NcCheckboxRadioSwitch_js__WEBPACK_IMPORTED_MODULE_5__["default"],
    NcDateTime: _nextcloud_vue_dist_Components_NcDateTime_js__WEBPACK_IMPORTED_MODULE_9__["default"]
  },
  props: {
    incoming: {
      type: [File, Object],
      required: !0
    },
    existing: {
      type: Object,
      required: !0
    },
    newSelected: {
      type: Array,
      required: !0
    },
    oldSelected: {
      type: Array,
      required: !0
    }
  },
  data() {
    return {
      asyncPreview: null
    };
  },
  computed: {
    /**
     * Whether the incoming or existing file is selected.
     * This is used by the parent component to ensure
     * that the user has selected at least one of the two files.
     */
    isEnoughSelected() {
      return this.isChecked(this.incoming, this.newSelected) || this.isChecked(this.existing, this.oldSelected);
    },
    incomingPreview() {
      return this.asyncPreview ? this.asyncPreview : this.previewUrl(this.incoming);
    },
    existingPreview() {
      return this.previewUrl(this.existing);
    },
    incomingLastModified() {
      return this.lastModified(this.incoming);
    },
    existingLastModified() {
      return this.lastModified(this.existing);
    }
  },
  methods: {
    lastModified(i) {
      return (i instanceof File ? new Date(i.lastModified) : i.mtime) ?? null;
    },
    size(i) {
      return i.size ? (0,_nextcloud_files__WEBPACK_IMPORTED_MODULE_2__.formatFileSize)(i.size, !0) : (0,_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.t)("Unknown size");
    },
    previewUrl(i) {
      if (i instanceof File) {
        this.previewImage(i).then((e) => {
          this.asyncPreview = e;
        });
        return;
      }
      if (i.type === _nextcloud_files__WEBPACK_IMPORTED_MODULE_2__.FileType.Folder)
        return null;
      try {
        const e = i.attributes.previewUrl || (0,_nextcloud_router__WEBPACK_IMPORTED_MODULE_8__.generateUrl)("/core/preview?fileId={fileid}", {
          fileid: i.fileid
        }), t = new URL(window.location.origin + e);
        return t.searchParams.set("x", h.toString()), t.searchParams.set("y", h.toString()), t.searchParams.set("mimeFallback", "true"), t.href;
      } catch {
        return null;
      }
    },
    isFolder(i) {
      return i.type === _nextcloud_files__WEBPACK_IMPORTED_MODULE_2__.FileType.Folder || i.type === "httpd/unix-directory";
    },
    isChecked(i, e) {
      return e.includes(i);
    },
    onUpdateIncomingChecked(i) {
      i ? this.$emit("update:newSelected", [this.incoming, ...this.newSelected]) : this.$emit("update:newSelected", this.newSelected.filter((e) => e !== this.incoming));
    },
    onUpdateExistingChecked(i) {
      i ? this.$emit("update:oldSelected", [this.existing, ...this.oldSelected]) : this.$emit("update:oldSelected", this.oldSelected.filter((e) => e !== this.existing));
    },
    /**
     * Get the preview Image of a file
     * @param file the soon-to-be-uploaded File
     */
    async previewImage(i) {
      return new Promise((e) => {
        if (i.type.startsWith("image/")) {
          const t = new FileReader();
          t.onload = async (s) => {
            const l = s?.target?.result;
            if (l instanceof ArrayBuffer) {
              const n = new Blob([l], { type: i.type }), c = URL.createObjectURL(n);
              e(c);
              return;
            }
            e(null);
          }, t.readAsArrayBuffer(i);
        }
      });
    },
    t: _index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.t
  }
});
var Z = function() {
  var e = this, t = e._self._c;
  return e._self._setupProxy, t("fieldset", { staticClass: "node-picker__wrapper", attrs: { "data-cy-conflict-picker-fieldset": e.existing.basename } }, [t("legend", [e._v(e._s(e.existing.basename))]), t("NcCheckboxRadioSwitch", { attrs: { checked: e.isChecked(e.incoming, e.newSelected), required: !e.isEnoughSelected, "data-cy-conflict-picker-input-incoming": e.existing.basename }, on: { "update:checked": e.onUpdateIncomingChecked } }, [t("span", { staticClass: "node-picker node-picker--incoming" }, [e.incomingPreview ? t("img", { staticClass: "node-picker__preview", attrs: { src: e.incomingPreview, alt: e.t("Preview image"), loading: "lazy" } }) : [e.isFolder(e.existing) ? t("FolderSvg", { staticClass: "node-picker__icon", attrs: { size: 48 } }) : t("FileSvg", { staticClass: "node-picker__icon", attrs: { size: 48 } })], t("span", { staticClass: "node-picker__desc" }, [t("span", { staticClass: "node-picker__name" }, [e._v(e._s(e.t("New version")))]), e.incomingLastModified ? t("NcDateTime", { staticClass: "node-picker__mtime", attrs: { timestamp: e.incomingLastModified, "relative-time": !1, format: { timeStyle: "short", dateStyle: "medium" } } }) : t("span", { staticClass: "node-picker__mtime" }, [e._v(" " + e._s(e.t("Last modified date unknown")) + " ")]), t("span", { staticClass: "node-picker__size" }, [e._v(e._s(e.size(e.incoming)))])], 1)], 2)]), t("NcCheckboxRadioSwitch", { attrs: { checked: e.isChecked(e.existing, e.oldSelected), required: !e.isEnoughSelected, "data-cy-conflict-picker-input-existing": e.existing.basename }, on: { "update:checked": e.onUpdateExistingChecked } }, [t("span", { staticClass: "node-picker node-picker--existing" }, [e.existingPreview ? t("img", { staticClass: "node-picker__preview", attrs: { src: e.existingPreview, alt: e.t("Preview image"), loading: "lazy" } }) : [e.isFolder(e.existing) ? t("FolderSvg", { staticClass: "node-picker__icon", attrs: { size: 48 } }) : t("FileSvg", { staticClass: "node-picker__icon", attrs: { size: 48 } })], t("span", { staticClass: "node-picker__desc" }, [t("span", { staticClass: "node-picker__name" }, [e._v(e._s(e.t("Existing version")))]), e.existingLastModified ? t("NcDateTime", { staticClass: "node-picker__mtime", attrs: { timestamp: e.existingLastModified, "relative-time": !1, format: { timeStyle: "short", dateStyle: "medium" } } }) : t("span", { staticClass: "node-picker__mtime" }, [e._v(" " + e._s(e.t("Last modified date unknown")) + " ")]), t("span", { staticClass: "node-picker__size" }, [e._v(e._s(e.size(e.existing)))])], 1)], 2)])], 1);
}, j = [], W = /* @__PURE__ */ (0,_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.n)(
  H,
  Z,
  j,
  !1,
  null,
  "f85db9fe",
  null,
  null
);
const Y = W.exports, G = (0,vue__WEBPACK_IMPORTED_MODULE_10__.defineComponent)({
  name: "ConflictPicker",
  components: {
    ArrowRight: L,
    Close: R,
    NcButton: _nextcloud_vue_dist_Components_NcButton_js__WEBPACK_IMPORTED_MODULE_7__["default"],
    NcCheckboxRadioSwitch: _nextcloud_vue_dist_Components_NcCheckboxRadioSwitch_js__WEBPACK_IMPORTED_MODULE_5__["default"],
    NcDialog: _nextcloud_vue_dist_Components_NcDialog_js__WEBPACK_IMPORTED_MODULE_6__["default"],
    NodesPicker: Y
  },
  props: {
    /** Directory/context file name */
    dirname: {
      type: String,
      default: ""
    },
    /** All the existing files in the current directory */
    content: {
      type: Array,
      required: !0
    },
    /** New files being moved/uploaded */
    conflicts: {
      type: Array,
      required: !0
    }
  },
  emits: ["cancel", "submit"],
  data() {
    return {
      // computed list of conflicting files already present in the directory
      files: [],
      opened: !0,
      blockedTitle: (0,_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.t)("You need to select at least one version of each file to continue."),
      newSelected: [],
      oldSelected: []
    };
  },
  computed: {
    name() {
      return this?.dirname?.trim?.() !== "" ? (0,_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.a)("{count} file conflict in {dirname}", "{count} file conflicts in {dirname}", this.conflicts.length, {
        count: this.conflicts.length,
        dirname: this.dirname
      }) : (0,_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.a)("{count} file conflict", "{count} files conflict", this.conflicts.length, { count: this.conflicts.length });
    },
    skipButtonLabel() {
      return (0,_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.a)("Skip this file", "Skip {count} files", this.conflicts.length, { count: this.conflicts.length });
    },
    // Select all incoming files
    selectAllNewBind() {
      const i = this.isNoneNewSelected || this.isSomeNewSelected ? this.t("Select all") : this.t("Unselect all");
      return {
        "aria-label": i,
        checked: this.isAllNewSelected,
        indeterminate: this.isSomeNewSelected,
        title: i
      };
    },
    isAllNewSelected() {
      return this.newSelected.length === this.conflicts.length;
    },
    isNoneNewSelected() {
      return this.newSelected.length === 0;
    },
    isSomeNewSelected() {
      return !this.isAllNewSelected && !this.isNoneNewSelected;
    },
    // Select all existing files
    selectAllOldBind() {
      const i = this.isNoneOldSelected || this.isSomeOldSelected ? this.t("Select all") : this.t("Unselect all");
      return {
        "aria-label": i,
        checked: this.isAllOldSelected,
        indeterminate: this.isSomeOldSelected,
        title: i
      };
    },
    isAllOldSelected() {
      return this.oldSelected.length === this.files.length;
    },
    isNoneOldSelected() {
      return this.oldSelected.length === 0;
    },
    isSomeOldSelected() {
      return !this.isAllOldSelected && !this.isNoneOldSelected;
    },
    // Global handlings
    isEnoughSelected() {
      return this.isAllOldSelected || this.isAllNewSelected ? !0 : this.$refs?.nodesPicker?.every?.((i) => i.isEnoughSelected);
    }
  },
  mounted() {
    if (this.files = this.conflicts.map((i) => {
      const e = i instanceof File ? i.name : i.basename;
      return this.content.find((t) => t.basename === e);
    }).filter(Boolean), this.conflicts.length === 0 || this.files.length === 0) {
      const i = new Error("ConflictPicker: files and conflicts must not be empty");
      throw this.onCancel(i), i;
    }
    if (this.conflicts.length !== this.files.length) {
      const i = new Error("ConflictPicker: files and conflicts must have the same length. Make sure you filter out non conflicting files from the conflicts array.");
      throw this.onCancel(i), i;
    }
    _index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.l.debug("ConflictPicker initialised", { files: this.files, conflicts: this.conflicts, content: this.content });
  },
  methods: {
    onCancel(i) {
      this.opened = !1, this.$emit("cancel", i);
    },
    onSkip() {
      _index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.l.debug("Conflict skipped. Ignoring all conflicting files"), this.opened = !1, this.$emit("submit", {
        selected: [],
        renamed: []
      });
    },
    onSubmit() {
      if (!this.isEnoughSelected) {
        this.scrollValidityInputIntoView(), this.$refs.form.reportValidity(), (0,_nextcloud_dialogs__WEBPACK_IMPORTED_MODULE_3__.showError)(this.blockedTitle);
        return;
      }
      const i = this.oldSelected.map((n) => n.basename), e = this.content.map((n) => n.basename), t = [], s = this.newSelected.filter((n) => {
        const c = n instanceof File ? n.name : n.basename;
        return i.includes(c);
      });
      s.length > 0 && s.forEach((n) => {
        const c = n instanceof File ? n.name : n.basename, u = this.getUniqueName(c, e);
        if (n instanceof File) {
          Object.defineProperty(n, "name", { value: u }), t.push(n);
          return;
        }
        n.rename(u), t.push(n);
      });
      const l = this.newSelected.filter((n) => {
        const c = n instanceof File ? n.name : n.basename;
        return !i.includes(c) && !s.includes(n);
      });
      _index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.l.debug("Conflict resolved", { selected: l, renamed: t }), this.opened = !1, this.$emit("submit", {
        selected: l,
        renamed: t
      });
    },
    /**
     * Get a unique name for a file based
     * on the existing directory content.
     * @param {string} name The original file name with extension
     * @param {string} names The existing directory content names
     * @return {string} A unique name
     * TODO: migrate to @nextcloud/files
     */
    getUniqueName(i, e) {
      let t = i, s = 1;
      for (; e.includes(t); ) {
        const l = (0,path__WEBPACK_IMPORTED_MODULE_1__.extname)(i);
        t = `${(0,path__WEBPACK_IMPORTED_MODULE_1__.basename)(i, l)} (${s++})${l}`;
      }
      return t;
    },
    /**
     * Scroll the first invalid input into view.
     * This is needed because the browser uses behavior: "nearest" by default.
     */
    scrollValidityInputIntoView() {
      const i = '.checkbox-radio-switch input[type="checkbox"]';
      [...this.$el.querySelectorAll(i)].forEach((s) => s?.setCustomValidity?.(""));
      const t = this.$el.querySelector(i + ":invalid");
      t && (t.setCustomValidity(this.blockedTitle), t.scrollIntoView({ behavior: "instant", block: "center" }));
    },
    onSelectAllNew(i) {
      i ? (_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.l.debug("Selected all new files"), this.newSelected = this.conflicts) : (_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.l.debug("Cleared new selection"), this.newSelected = []);
    },
    onSelectAllOld(i) {
      i ? (_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.l.debug("Selected all existing files"), this.oldSelected = this.files) : (_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.l.debug("Cleared old selection"), this.oldSelected = []);
    },
    t: _index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.t
  }
});
var J = function() {
  var e = this, t = e._self._c;
  return e._self._setupProxy, t("NcDialog", { staticClass: "conflict-picker", attrs: { "data-cy-conflict-picker": "", "close-on-click-outside": !1, "can-close": !0, show: e.opened, name: e.name, size: "large" }, on: { closing: e.onCancel }, scopedSlots: e._u([{ key: "actions", fn: function() {
    return [t("NcButton", { attrs: { "aria-label": e.t("Cancel"), title: e.t("Cancel the entire operation"), "data-cy-conflict-picker-cancel": "", type: "tertiary" }, on: { click: e.onCancel }, scopedSlots: e._u([{ key: "icon", fn: function() {
      return [t("Close", { attrs: { size: 20 } })];
    }, proxy: !0 }]) }, [e._v(" " + e._s(e.t("Cancel")) + " ")]), t("span", { staticClass: "dialog__actions-separator" }), t("NcButton", { attrs: { "aria-label": e.skipButtonLabel, "data-cy-conflict-picker-skip": "" }, on: { click: e.onSkip }, scopedSlots: e._u([{ key: "icon", fn: function() {
      return [t("Close", { attrs: { size: 20 } })];
    }, proxy: !0 }]) }, [e._v(" " + e._s(e.skipButtonLabel) + " ")]), t("NcButton", { class: { "button-vue--disabled": !e.isEnoughSelected }, attrs: { "aria-label": e.t("Continue"), title: e.isEnoughSelected ? "" : e.blockedTitle, "data-cy-conflict-picker-submit": "", "native-type": "submit", type: "primary" }, on: { click: function(s) {
      return s.stopPropagation(), s.preventDefault(), e.onSubmit.apply(null, arguments);
    } }, scopedSlots: e._u([{ key: "icon", fn: function() {
      return [t("ArrowRight", { attrs: { size: 20 } })];
    }, proxy: !0 }]) }, [e._v(" " + e._s(e.t("Continue")) + " ")])];
  }, proxy: !0 }]) }, [t("div", { staticClass: "conflict-picker__header" }, [t("p", { staticClass: "conflict-picker__description", attrs: { id: "conflict-picker-description" } }, [e._v(" " + e._s(e.t("Which files do you want to keep?"))), t("br"), e._v(" " + e._s(e.t("If you select both versions, the copied file will have a number added to its name."))), t("br"), e._v(" " + e._s(e.t("When an incoming folder is selected, any conflicting files within it will also be overwritten.")) + " ")])]), t("form", { ref: "form", staticClass: "conflict-picker__form", attrs: { "aria-labelledby": "conflict-picker-description", "data-cy-conflict-picker-form": "" }, on: { submit: function(s) {
    return s.preventDefault(), s.stopPropagation(), e.onSubmit.apply(null, arguments);
  } } }, [t("fieldset", { staticClass: "conflict-picker__all", attrs: { "data-cy-conflict-picker-fieldset": "all" } }, [t("legend", { staticClass: "hidden-visually" }, [e._v(" " + e._s(e.t("Select all checkboxes")) + " ")]), t("NcCheckboxRadioSwitch", e._b({ attrs: { "data-cy-conflict-picker-input-incoming": "all" }, on: { "update:checked": e.onSelectAllNew } }, "NcCheckboxRadioSwitch", e.selectAllNewBind, !1), [e._v(" " + e._s(e.t("Select all new files")) + " ")]), t("NcCheckboxRadioSwitch", e._b({ attrs: { "data-cy-conflict-picker-input-existing": "all" }, on: { "update:checked": e.onSelectAllOld } }, "NcCheckboxRadioSwitch", e.selectAllOldBind, !1), [e._v(" " + e._s(e.t("Select all existing files")) + " ")])], 1), e._l(e.files, function(s, l) {
    return t("NodesPicker", { key: s.fileid, ref: "nodesPicker", refInFor: !0, attrs: { incoming: e.conflicts[l], existing: e.files[l], "new-selected": e.newSelected, "old-selected": e.oldSelected }, on: { "update:newSelected": function(n) {
      e.newSelected = n;
    }, "update:new-selected": function(n) {
      e.newSelected = n;
    }, "update:oldSelected": function(n) {
      e.oldSelected = n;
    }, "update:old-selected": function(n) {
      e.oldSelected = n;
    } } });
  })], 2)]);
}, K = [], Q = /* @__PURE__ */ (0,_index_DM2X1kc6_mjs__WEBPACK_IMPORTED_MODULE_4__.n)(
  G,
  J,
  K,
  !1,
  null,
  "12c4204f",
  null,
  null
);
const ae = Q.exports;



/***/ })

}]);
//# sourceMappingURL=node_modules_nextcloud_upload_dist_chunks_ConflictPicker-Bif6rCp6_mjs-node_modules_nextcloud_upload_dist_chunks_ConflictPicker-Bif6rCp6_mjs.js.map?v=6fe2b9cfc0c2ecea9a81