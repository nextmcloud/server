{"version":3,"file":"data_image_svg_xml_3csvg_20xmlns_27http_www_w3_org_2000_svg_27_20width_2724_27_20height_2724_-28884d-data_image_svg_xml_3csvg_20xmlns_27http_www_w3_org_2000_svg_27_20width_2724_27_20height_2724_-28884d.js?v=5e4ceb7fd9d03ea20c8b","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA","sources":["webpack:///nextcloud/node_modules/@nextcloud/dialogs/dist/chunks/FilePicker-DBGB1Rec.mjs"],"sourcesContent":["import { ref as p, onBeforeMount as X, onMounted as z, computed as u, defineComponent as $, watch as T, onUnmounted as q, nextTick as J, toRef as Q } from \"vue\";\nimport { FileType as P, formatFileSize as Y, davRootPath as ee, davRemoteURL as te, davGetClient as H, getFavoriteNodes as ie, davGetRecentSearch as ne, davGetDefaultPropfind as se, davResultToNode as re } from \"@nextcloud/files\";\nimport { getCanonicalLocale as le } from \"@nextcloud/l10n\";\nimport { NcCheckboxRadioSwitch as U, NcDateTime as ae, NcButton as E, NcActions as oe, NcActionInput as ce, NcBreadcrumbs as ue, NcBreadcrumb as de, NcIconSvgWrapper as fe, NcSelect as _e, NcTextField as pe, NcDialog as me, NcEmptyContent as ve } from \"@nextcloud/vue\";\nimport { loadState as O } from \"@nextcloud/initial-state\";\nimport { generateUrl as V, generateRemoteUrl as ge } from \"@nextcloud/router\";\nimport { toValue as M } from \"@vueuse/core\";\nimport Z from \"@nextcloud/axios\";\nimport { k as R, t as y } from \"./toast-WB-IZBJw.mjs\";\nimport { getCurrentUser as he } from \"@nextcloud/auth\";\nimport { Fragment as ye } from \"vue-frag\";\nimport { mdiFolder as we, mdiClock as be, mdiStar as Ce } from \"@mdi/js\";\nimport { emit as ke } from \"@nextcloud/event-bus\";\nimport { join as A } from \"path\";\nfunction b(r, e, i, t, n, s, o, f) {\n  var l = typeof r == \"function\" ? r.options : r;\n  e && (l.render = e, l.staticRenderFns = i, l._compiled = !0), t && (l.functional = !0), s && (l._scopeId = \"data-v-\" + s);\n  var _;\n  if (o ? (_ = function(c) {\n    c = c || // cached call\n    this.$vnode && this.$vnode.ssrContext || // stateful\n    this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext, !c && typeof __VUE_SSR_CONTEXT__ < \"u\" && (c = __VUE_SSR_CONTEXT__), n && n.call(this, c), c && c._registeredComponents && c._registeredComponents.add(o);\n  }, l._ssrRegister = _) : n && (_ = f ? function() {\n    n.call(\n      this,\n      (l.functional ? this.parent : this).$root.$options.shadowRoot\n    );\n  } : n), _)\n    if (l.functional) {\n      l._injectStyles = _;\n      var a = l.render;\n      l.render = function(d, C) {\n        return _.call(C), a(d, C);\n      };\n    } else {\n      var k = l.beforeCreate;\n      l.beforeCreate = k ? [].concat(k, _) : [_];\n    }\n  return {\n    exports: r,\n    options: l\n  };\n}\nconst Fe = {\n  name: \"FileIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar Se = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon file-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, $e = [], Ne = /* @__PURE__ */ b(\n  Fe,\n  Se,\n  $e,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst W = Ne.exports, D = () => {\n  const r = () => document.getElementById(\"isPublic\")?.value === \"1\", e = p(!0);\n  return X(() => {\n    e.value = r();\n  }), {\n    isPublic: e\n  };\n};\n/**\n * @copyright Copyright (c) 2023 Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @author Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst G = () => {\n  const r = O(\"files\", \"config\", null), e = p(r?.show_hidden ?? !0), i = p(r?.sort_favorites_first ?? !0), t = p(r?.crop_image_previews ?? !0), { isPublic: n } = D();\n  return z(async () => {\n    if (n.value)\n      console.debug(\"Skip loading files settings - currently on public share\");\n    else\n      try {\n        const { data: s } = await Z.get(V(\"/apps/files/api/v1/configs\"));\n        e.value = s?.data?.show_hidden ?? !1, i.value = s?.data?.sort_favorites_first ?? !0, t.value = s?.data?.crop_image_previews ?? !0;\n      } catch (s) {\n        console.error(\"Could not load files settings\", s), R(y(\"Could not load files settings\"));\n      }\n  }), {\n    showHiddenFiles: e,\n    sortFavoritesFirst: i,\n    cropImagePreviews: t\n  };\n}, xe = (r) => {\n  const e = (a) => a === \"asc\" ? \"ascending\" : a === \"desc\" ? \"descending\" : \"none\", i = O(\"files\", \"viewConfigs\", null), t = p({\n    sortBy: i?.files?.sorting_mode ?? \"basename\",\n    order: e(i?.files?.sorting_direction ?? \"asc\")\n  }), n = p({\n    sortBy: i?.recent?.sorting_mode ?? \"basename\",\n    order: e(i?.recent?.sorting_direction ?? \"asc\")\n  }), s = p({\n    sortBy: i?.favorites?.sorting_mode ?? \"basename\",\n    order: e(i?.favorites?.sorting_direction ?? \"asc\")\n  }), { isPublic: o } = D();\n  z(async () => {\n    if (o.value)\n      console.debug(\"Skip loading files views - currently on public share\");\n    else\n      try {\n        const { data: a } = await Z.get(V(\"/apps/files/api/v1/views\"));\n        t.value = {\n          sortBy: a?.data?.files?.sorting_mode ?? \"basename\",\n          order: e(a?.data?.files?.sorting_direction)\n        }, s.value = {\n          sortBy: a?.data?.favorites?.sorting_mode ?? \"basename\",\n          order: e(a?.data?.favorites?.sorting_direction)\n        }, n.value = {\n          sortBy: a?.data?.recent?.sorting_mode ?? \"basename\",\n          order: e(a?.data?.recent?.sorting_direction)\n        };\n      } catch (a) {\n        console.error(\"Could not load files views\", a), R(y(\"Could not load files views\"));\n      }\n  });\n  const f = u(() => M(r || \"files\") === \"files\" ? t.value : M(r) === \"recent\" ? n.value : s.value), l = u(() => f.value.sortBy), _ = u(() => f.value.order);\n  return {\n    filesViewConfig: t,\n    favoritesViewConfig: s,\n    recentViewConfig: n,\n    currentConfig: f,\n    sortBy: l,\n    order: _\n  };\n}, Be = {\n  name: \"MenuUpIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar Pe = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon menu-up-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M7,15L12,10L17,15H7Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, ze = [], Le = /* @__PURE__ */ b(\n  Be,\n  Pe,\n  ze,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst Ie = Le.exports, Ve = {\n  name: \"MenuDownIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar Re = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon menu-down-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M7,10L12,15L17,10H7Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, De = [], He = /* @__PURE__ */ b(\n  Ve,\n  Re,\n  De,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst Me = He.exports, j = {\n  \"file-picker__file-icon\": \"_file-picker__file-icon_1vgv4_5\"\n}, Ae = /* @__PURE__ */ $({\n  __name: \"LoadingTableRow\",\n  props: {\n    showCheckbox: { type: Boolean }\n  },\n  setup(r) {\n    return { __sfc: !0, fileListIconStyles: j };\n  }\n});\nvar Te = function() {\n  var e = this, i = e._self._c, t = e._self._setupProxy;\n  return i(\"tr\", { staticClass: \"file-picker__row loading-row\", attrs: { \"aria-hidden\": \"true\" } }, [e.showCheckbox ? i(\"td\", { staticClass: \"row-checkbox\" }, [i(\"span\")]) : e._e(), i(\"td\", { staticClass: \"row-name\" }, [i(\"div\", { staticClass: \"row-wrapper\" }, [i(\"span\", { class: t.fileListIconStyles[\"file-picker__file-icon\"] }), i(\"span\")])]), e._m(0), e._m(1)]);\n}, Ue = [function() {\n  var r = this, e = r._self._c;\n  return r._self._setupProxy, e(\"td\", { staticClass: \"row-size\" }, [e(\"span\")]);\n}, function() {\n  var r = this, e = r._self._c;\n  return r._self._setupProxy, e(\"td\", { staticClass: \"row-modified\" }, [e(\"span\")]);\n}], Ee = /* @__PURE__ */ b(\n  Ae,\n  Te,\n  Ue,\n  !1,\n  null,\n  \"6aded0d9\",\n  null,\n  null\n);\nconst Oe = Ee.exports;\n/**\n * @copyright Copyright (c) 2023 Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @author Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nfunction Ze(r, e = {}) {\n  e = { size: 32, cropPreview: !1, mimeFallback: !0, ...e };\n  try {\n    const i = r.attributes?.previewUrl || V(\"/core/preview?fileId={fileid}\", {\n      fileid: r.fileid\n    });\n    let t;\n    try {\n      t = new URL(i);\n    } catch {\n      t = new URL(i, window.location.origin);\n    }\n    return t.searchParams.set(\"x\", `${e.size}`), t.searchParams.set(\"y\", `${e.size}`), t.searchParams.set(\"mimeFallback\", `${e.mimeFallback}`), t.searchParams.set(\"a\", e.cropPreview === !0 ? \"0\" : \"1\"), t.searchParams.set(\"c\", `${r.attributes.etag}`), t;\n  } catch {\n    return null;\n  }\n}\nconst We = {\n  name: \"FolderIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar Ge = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon folder-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, je = [], Ke = /* @__PURE__ */ b(\n  We,\n  Ge,\n  je,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst K = Ke.exports, Xe = {\n  name: \"FilePreview\"\n}, qe = /* @__PURE__ */ $({\n  ...Xe,\n  props: {\n    node: null,\n    cropImagePreviews: { type: Boolean }\n  },\n  setup(r) {\n    const e = r, i = p(j), t = u(() => Ze(e.node, { cropPreview: e.cropImagePreviews })), n = u(() => e.node.type === P.File), s = p(!1);\n    return T(t, () => {\n      if (s.value = !1, t.value) {\n        const o = document.createElement(\"img\");\n        o.src = t.value.href, o.onerror = () => o.remove(), o.onload = () => {\n          s.value = !0, o.remove();\n        }, document.body.appendChild(o);\n      }\n    }, { immediate: !0 }), { __sfc: !0, fileListIconStyles: i, props: e, previewURL: t, isFile: n, canLoadPreview: s, IconFile: W, IconFolder: K };\n  }\n});\nvar Je = function() {\n  var e = this, i = e._self._c, t = e._self._setupProxy;\n  return i(\"div\", { class: t.fileListIconStyles[\"file-picker__file-icon\"], style: t.canLoadPreview ? { backgroundImage: `url(${t.previewURL})` } : void 0 }, [t.canLoadPreview ? e._e() : [t.isFile ? i(t.IconFile, { attrs: { size: 20 } }) : i(t.IconFolder, { attrs: { size: 20 } })]], 2);\n}, Qe = [], Ye = /* @__PURE__ */ b(\n  qe,\n  Je,\n  Qe,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst et = Ye.exports, tt = /* @__PURE__ */ $({\n  __name: \"FileListRow\",\n  props: {\n    allowPickDirectory: { type: Boolean },\n    selected: { type: Boolean },\n    showCheckbox: { type: Boolean },\n    canPick: { type: Boolean },\n    node: null,\n    cropImagePreviews: { type: Boolean }\n  },\n  emits: [\"update:selected\", \"enter-directory\"],\n  setup(r, { emit: e }) {\n    const i = r, t = u(() => i.node.attributes?.displayName || i.node.basename.slice(0, i.node.extension ? -i.node.extension.length : void 0)), n = u(() => i.node.extension), s = u(() => i.node.type === P.Folder), o = u(() => i.canPick && (i.allowPickDirectory || !s.value));\n    function f() {\n      e(\"update:selected\", !i.selected);\n    }\n    function l() {\n      s.value ? e(\"enter-directory\", i.node) : f();\n    }\n    function _(a) {\n      a.key === \"Enter\" && l();\n    }\n    return { __sfc: !0, props: i, emit: e, displayName: t, fileExtension: n, isDirectory: s, isPickable: o, toggleSelected: f, handleClick: l, handleKeyDown: _, formatFileSize: Y, NcCheckboxRadioSwitch: U, NcDateTime: ae, t: y, FilePreview: et };\n  }\n});\nvar it = function() {\n  var e = this, i = e._self._c, t = e._self._setupProxy;\n  return i(\"tr\", e._g({ class: [\"file-picker__row\", {\n    \"file-picker__row--selected\": e.selected && !e.showCheckbox\n  }], attrs: { tabindex: e.showCheckbox && !t.isDirectory ? void 0 : 0, \"aria-selected\": t.isPickable ? e.selected : void 0, \"data-filename\": e.node.basename, \"data-testid\": \"file-list-row\" } }, {\n    click: t.handleClick,\n    /* same as tabindex -> if we hide the checkbox or this is a directory we need keyboard access to enter the directory or select the node */\n    ...!e.showCheckbox || t.isDirectory ? { keydown: t.handleKeyDown } : {}\n  }), [e.showCheckbox ? i(\"td\", { staticClass: \"row-checkbox\", on: { click: function(n) {\n    return n.stopPropagation(), (() => {\n    }).apply(null, arguments);\n  } } }, [i(t.NcCheckboxRadioSwitch, { attrs: { \"aria-label\": t.t(\"Select the row for {nodename}\", { nodename: t.displayName }), checked: e.selected, disabled: !t.isPickable, \"data-testid\": \"row-checkbox\" }, on: { \"update:checked\": t.toggleSelected } })], 1) : e._e(), i(\"td\", { staticClass: \"row-name\" }, [i(\"div\", { staticClass: \"file-picker__name-container\", attrs: { \"data-testid\": \"row-name\" } }, [i(t.FilePreview, { attrs: { node: e.node, \"crop-image-previews\": e.cropImagePreviews } }), i(\"div\", { staticClass: \"file-picker__file-name\", attrs: { title: t.displayName }, domProps: { textContent: e._s(t.displayName) } }), i(\"div\", { staticClass: \"file-picker__file-extension\", domProps: { textContent: e._s(t.fileExtension) } })], 1)]), i(\"td\", { staticClass: \"row-size\" }, [e._v(\" \" + e._s(t.formatFileSize(e.node.size || 0)) + \" \")]), i(\"td\", { staticClass: \"row-modified\" }, [i(t.NcDateTime, { attrs: { timestamp: e.node.mtime, \"ignore-seconds\": !0 } })], 1)]);\n}, nt = [], st = /* @__PURE__ */ b(\n  tt,\n  it,\n  nt,\n  !1,\n  null,\n  \"48df4f27\",\n  null,\n  null\n);\nconst rt = st.exports, lt = /* @__PURE__ */ $({\n  __name: \"FileList\",\n  props: {\n    currentView: null,\n    multiselect: { type: Boolean },\n    allowPickDirectory: { type: Boolean },\n    loading: { type: Boolean },\n    files: null,\n    selectedFiles: null,\n    path: null\n  },\n  emits: [\"update:path\", \"update:selectedFiles\"],\n  setup(r, { emit: e }) {\n    const i = r, t = p(), { currentConfig: n } = xe(i.currentView), s = u(() => t.value ?? n.value), o = u(() => s.value.sortBy === \"basename\" ? s.value.order === \"none\" ? void 0 : s.value.order : void 0), f = u(() => s.value.sortBy === \"size\" ? s.value.order === \"none\" ? void 0 : s.value.order : void 0), l = u(() => s.value.sortBy === \"mtime\" ? s.value.order === \"none\" ? void 0 : s.value.order : void 0), _ = (g) => {\n      s.value.sortBy === g ? s.value.order === \"ascending\" ? t.value = { sortBy: s.value.sortBy, order: \"descending\" } : t.value = { sortBy: s.value.sortBy, order: \"ascending\" } : t.value = { sortBy: g, order: \"ascending\" };\n    }, { sortFavoritesFirst: a, cropImagePreviews: k } = G(), c = u(\n      () => {\n        const g = {\n          ascending: (h, m, B) => B(h, m),\n          descending: (h, m, B) => B(m, h),\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          none: (h, m, B) => 0\n        }, F = {\n          basename: (h, m) => (h.attributes?.displayName || h.basename).localeCompare(m.attributes?.displayName || m.basename, le()),\n          size: (h, m) => (h.size || 0) - (m.size || 0),\n          // reverted because \"young\" is smaller than \"old\"\n          mtime: (h, m) => (m.mtime?.getTime?.() || 0) - (h.mtime?.getTime?.() || 0)\n        };\n        return [...i.files].sort(\n          (h, m) => (\n            // Folders always come above the files\n            (m.type === P.Folder ? 1 : 0) - (h.type === P.Folder ? 1 : 0) || (a ? (m.attributes.favorite ? 1 : 0) - (h.attributes.favorite ? 1 : 0) : 0) || g[s.value.order](h, m, F[s.value.sortBy])\n          )\n        );\n      }\n    ), d = u(() => i.files.filter((g) => i.allowPickDirectory || g.type !== P.Folder)), C = u(() => !i.loading && i.selectedFiles.length > 0 && i.selectedFiles.length >= d.value.length);\n    function L() {\n      i.selectedFiles.length < d.value.length ? e(\"update:selectedFiles\", d.value) : e(\"update:selectedFiles\", []);\n    }\n    function N(g) {\n      i.selectedFiles.includes(g) ? e(\"update:selectedFiles\", i.selectedFiles.filter((F) => F.path !== g.path)) : i.multiselect ? e(\"update:selectedFiles\", [...i.selectedFiles, g]) : e(\"update:selectedFiles\", [g]);\n    }\n    function I(g) {\n      e(\"update:path\", g.path);\n    }\n    const x = p(4), S = p();\n    {\n      const g = () => J(() => {\n        const F = S.value?.parentElement?.children || [];\n        let h = S.value?.parentElement?.clientHeight || 450;\n        for (let m = 0; m < F.length; m++)\n          S.value?.isSameNode(F[m]) || (h -= F[m].clientHeight);\n        x.value = Math.floor((h - 50) / 50);\n      });\n      z(() => {\n        window.addEventListener(\"resize\", g), g();\n      }), q(() => {\n        window.removeEventListener(\"resize\", g);\n      });\n    }\n    return { __sfc: !0, props: i, emit: e, customSortingConfig: t, filesAppSorting: n, sortingConfig: s, sortByName: o, sortBySize: f, sortByModified: l, toggleSorting: _, sortFavoritesFirst: a, cropImagePreviews: k, sortedFiles: c, selectableFiles: d, allSelected: C, onSelectAll: L, onNodeSelected: N, onChangeDirectory: I, skeletonNumber: x, fileContainer: S, NcButton: E, NcCheckboxRadioSwitch: U, t: y, IconSortAscending: Ie, IconSortDescending: Me, LoadingTableRow: Oe, FileListRow: rt };\n  }\n});\nvar at = function() {\n  var e = this, i = e._self._c, t = e._self._setupProxy;\n  return i(\"div\", { ref: \"fileContainer\", staticClass: \"file-picker__files\" }, [i(\"table\", [i(\"thead\", [i(\"tr\", [e.multiselect ? i(\"th\", { staticClass: \"row-checkbox\" }, [i(\"span\", { staticClass: \"hidden-visually\" }, [e._v(\" \" + e._s(t.t(\"Select entry\")) + \" \")]), e.multiselect ? i(t.NcCheckboxRadioSwitch, { attrs: { \"aria-label\": t.t(\"Select all entries\"), checked: t.allSelected, \"data-testid\": \"select-all-checkbox\" }, on: { \"update:checked\": t.onSelectAll } }) : e._e()], 1) : e._e(), i(\"th\", { staticClass: \"row-name\", attrs: { \"aria-sort\": t.sortByName } }, [i(\"div\", { staticClass: \"header-wrapper\" }, [i(\"span\", { staticClass: \"file-picker__header-preview\" }), i(t.NcButton, { attrs: { wide: !0, type: \"tertiary\", \"data-test\": \"file-picker_sort-name\" }, on: { click: function(n) {\n    return t.toggleSorting(\"basename\");\n  } }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n    return [t.sortByName === \"ascending\" ? i(t.IconSortAscending, { attrs: { size: 20 } }) : t.sortByName === \"descending\" ? i(t.IconSortDescending, { attrs: { size: 20 } }) : i(\"span\", { staticStyle: { width: \"44px\" } })];\n  }, proxy: !0 }]) }, [e._v(\" \" + e._s(t.t(\"Name\")) + \" \")])], 1)]), i(\"th\", { staticClass: \"row-size\", attrs: { \"aria-sort\": t.sortBySize } }, [i(t.NcButton, { attrs: { wide: !0, type: \"tertiary\" }, on: { click: function(n) {\n    return t.toggleSorting(\"size\");\n  } }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n    return [t.sortBySize === \"ascending\" ? i(t.IconSortAscending, { attrs: { size: 20 } }) : t.sortBySize === \"descending\" ? i(t.IconSortDescending, { attrs: { size: 20 } }) : i(\"span\", { staticStyle: { width: \"44px\" } })];\n  }, proxy: !0 }]) }, [e._v(\" \" + e._s(t.t(\"Size\")) + \" \")])], 1), i(\"th\", { staticClass: \"row-modified\", attrs: { \"aria-sort\": t.sortByModified } }, [i(t.NcButton, { attrs: { wide: !0, type: \"tertiary\" }, on: { click: function(n) {\n    return t.toggleSorting(\"mtime\");\n  } }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n    return [t.sortByModified === \"ascending\" ? i(t.IconSortAscending, { attrs: { size: 20 } }) : t.sortByModified === \"descending\" ? i(t.IconSortDescending, { attrs: { size: 20 } }) : i(\"span\", { staticStyle: { width: \"44px\" } })];\n  }, proxy: !0 }]) }, [e._v(\" \" + e._s(t.t(\"Modified\")) + \" \")])], 1)])]), i(\"tbody\", [e.loading ? e._l(t.skeletonNumber, function(n) {\n    return i(t.LoadingTableRow, { key: n, attrs: { \"show-checkbox\": e.multiselect } });\n  }) : e._l(t.sortedFiles, function(n) {\n    return i(t.FileListRow, { key: n.fileid || n.path, attrs: { \"allow-pick-directory\": e.allowPickDirectory, \"show-checkbox\": e.multiselect, \"can-pick\": e.multiselect || e.selectedFiles.length === 0 || e.selectedFiles.includes(n), selected: e.selectedFiles.includes(n), node: n, \"crop-image-previews\": t.cropImagePreviews }, on: { \"update:selected\": function(s) {\n      return t.onNodeSelected(n);\n    }, \"enter-directory\": t.onChangeDirectory } });\n  })], 2)])]);\n}, ot = [], ct = /* @__PURE__ */ b(\n  lt,\n  at,\n  ot,\n  !1,\n  null,\n  \"d3c94818\",\n  null,\n  null\n);\nconst ut = ct.exports, dt = {\n  name: \"HomeIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar ft = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon home-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, _t = [], pt = /* @__PURE__ */ b(\n  dt,\n  ft,\n  _t,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst mt = pt.exports, vt = {\n  name: \"PlusIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar gt = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon plus-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, ht = [], yt = /* @__PURE__ */ b(\n  vt,\n  gt,\n  ht,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst wt = yt.exports, bt = /* @__PURE__ */ $({\n  __name: \"FilePickerBreadcrumbs\",\n  props: {\n    path: null,\n    showMenu: { type: Boolean }\n  },\n  emits: [\"update:path\", \"create-node\"],\n  setup(r, { emit: e }) {\n    const i = r, t = p(\"\"), n = p();\n    function s() {\n      const l = t.value.trim(), _ = n.value?.$el?.querySelector(\"input\");\n      let a = \"\";\n      return l.length === 0 ? a = y(\"Folder name cannot be empty.\") : l.includes(\"/\") ? a = y('\"/\" is not allowed inside a folder name.') : [\"..\", \".\"].includes(l) ? a = y('\"{name}\" is an invalid folder name.', { name: l }) : window.OC.config?.blacklist_files_regex && l.match(window.OC.config?.blacklist_files_regex) && (a = y('\"{name}\" is not an allowed folder name', { name: l })), _ && _.setCustomValidity(a), a === \"\";\n    }\n    const o = function() {\n      const l = t.value.trim();\n      s() && (e(\"create-node\", l), t.value = \"\");\n    }, f = u(\n      () => i.path.split(\"/\").filter((l) => l !== \"\").map((l, _, a) => ({\n        name: l,\n        path: \"/\" + a.slice(0, _ + 1).join(\"/\")\n      }))\n    );\n    return { __sfc: !0, props: i, emit: e, newNodeName: t, nameInput: n, validateInput: s, onSubmit: o, pathElements: f, IconFolder: K, IconHome: mt, IconPlus: wt, NcActions: oe, NcActionInput: ce, NcBreadcrumbs: ue, NcBreadcrumb: de, t: y };\n  }\n});\nvar Ct = function() {\n  var e = this, i = e._self._c, t = e._self._setupProxy;\n  return i(t.NcBreadcrumbs, { staticClass: \"file-picker__breadcrumbs\", scopedSlots: e._u([{ key: \"default\", fn: function() {\n    return [i(t.NcBreadcrumb, { attrs: { name: t.t(\"All files\"), title: t.t(\"Home\") }, on: { click: function(n) {\n      return t.emit(\"update:path\", \"/\");\n    } }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n      return [i(t.IconHome, { attrs: { size: 20 } })];\n    }, proxy: !0 }]) }), e._l(t.pathElements, function(n) {\n      return i(t.NcBreadcrumb, { key: n.path, attrs: { name: n.name, title: n.path }, on: { click: function(s) {\n        return t.emit(\"update:path\", n.path);\n      } } });\n    })];\n  }, proxy: !0 }, e.showMenu ? { key: \"actions\", fn: function() {\n    return [i(t.NcActions, { attrs: { \"aria-label\": t.t(\"Create directory\"), \"force-menu\": !0, \"force-name\": !0, \"menu-name\": t.t(\"New\"), type: \"secondary\" }, on: { close: function(n) {\n      t.newNodeName = \"\";\n    } }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n      return [i(t.IconPlus, { attrs: { size: 20 } })];\n    }, proxy: !0 }], null, !1, 2971667417) }, [i(t.NcActionInput, { ref: \"nameInput\", attrs: { value: t.newNodeName, label: t.t(\"New folder\"), placeholder: t.t(\"New folder name\") }, on: { \"update:value\": function(n) {\n      t.newNodeName = n;\n    }, submit: t.onSubmit, input: t.validateInput }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n      return [i(t.IconFolder, { attrs: { size: 20 } })];\n    }, proxy: !0 }], null, !1, 1614167509) })], 1)];\n  }, proxy: !0 } : null], null, !0) });\n}, kt = [], Ft = /* @__PURE__ */ b(\n  bt,\n  Ct,\n  kt,\n  !1,\n  null,\n  \"a25a2652\",\n  null,\n  null\n);\nconst St = Ft.exports, $t = {\n  name: \"CloseIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar Nt = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon close-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, xt = [], Bt = /* @__PURE__ */ b(\n  $t,\n  Nt,\n  xt,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst Pt = Bt.exports, zt = {\n  name: \"MagnifyIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar Lt = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon magnify-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, It = [], Vt = /* @__PURE__ */ b(\n  zt,\n  Lt,\n  It,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst Rt = Vt.exports;\n/**\n * @copyright Copyright (c) 2024 Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @author Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst Dt = (r) => {\n  const e = [\n    {\n      id: \"files\",\n      label: y(\"All files\"),\n      icon: we\n    },\n    {\n      id: \"recent\",\n      label: y(\"Recent\"),\n      icon: be\n    },\n    {\n      id: \"favorites\",\n      label: y(\"Favorites\"),\n      icon: Ce\n    }\n  ], i = r.value ? e.filter(({ id: t }) => t === \"files\") : e;\n  return {\n    allViews: e,\n    availableViews: i\n  };\n}, Ht = /* @__PURE__ */ $({\n  __name: \"FilePickerNavigation\",\n  props: {\n    currentView: null,\n    filterString: null,\n    isCollapsed: { type: Boolean },\n    disabledNavigation: { type: Boolean }\n  },\n  emits: [\"update:currentView\", \"update:filterString\"],\n  setup(r, { emit: e }) {\n    const i = r, { availableViews: t } = Dt(p(he() === null)), n = u(() => t.filter((o) => o.id === i.currentView)[0] ?? t[0]);\n    return { __sfc: !0, props: i, emit: e, availableViews: t, currentViewObject: n, updateFilterValue: (o) => e(\"update:filterString\", o), IconClose: Pt, IconMagnify: Rt, NcButton: E, NcIconSvgWrapper: fe, NcSelect: _e, NcTextField: pe, Fragment: ye, t: y };\n  }\n});\nvar Mt = function() {\n  var e = this, i = e._self._c, t = e._self._setupProxy;\n  return i(t.Fragment, [i(t.NcTextField, { staticClass: \"file-picker__filter-input\", attrs: { value: e.filterString, label: t.t(\"Filter file list\"), \"show-trailing-button\": !!e.filterString }, on: { \"update:value\": t.updateFilterValue, \"trailing-button-click\": function(n) {\n    return t.updateFilterValue(\"\");\n  } }, scopedSlots: e._u([{ key: \"trailing-button-icon\", fn: function() {\n    return [i(t.IconClose, { attrs: { size: 16 } })];\n  }, proxy: !0 }]) }, [i(t.IconMagnify, { attrs: { size: 16 } })], 1), t.availableViews.length > 1 && !e.disabledNavigation ? [e.isCollapsed ? i(t.NcSelect, { attrs: { \"aria-label\": t.t(\"Current view selector\"), clearable: !1, searchable: !1, options: t.availableViews, value: t.currentViewObject }, on: { input: (n) => t.emit(\"update:currentView\", n.id) } }) : i(\"ul\", { staticClass: \"file-picker__side\" }, e._l(t.availableViews, function(n) {\n    return i(\"li\", { key: n.id }, [i(t.NcButton, { attrs: { type: e.currentView === n.id ? \"primary\" : \"tertiary\", wide: !0 }, on: { click: function(s) {\n      return e.$emit(\"update:currentView\", n.id);\n    } }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n      return [i(t.NcIconSvgWrapper, { attrs: { path: n.icon, size: 20 } })];\n    }, proxy: !0 }], null, !0) }, [e._v(\" \" + e._s(n.label) + \" \")])], 1);\n  }), 0)] : e._e()], 2);\n}, At = [], Tt = /* @__PURE__ */ b(\n  Ht,\n  Mt,\n  At,\n  !1,\n  null,\n  \"a06474d4\",\n  null,\n  null\n);\nconst Ut = Tt.exports;\n/**\n * @copyright Copyright (c) 2023 Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @author Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nconst Et = function(r, e, i) {\n  const t = u(() => i.value ? \"/\" : ee), n = u(() => i.value ? ge(\"webdav\").replace(\"/remote.php\", \"/public.php\") : te), s = u(() => {\n    if (i.value) {\n      const c = document.getElementById(\"sharingToken\").value, d = btoa(`${c}:null`);\n      return H(n.value, {\n        Authorization: `Basic ${d}`\n      });\n    }\n    return H();\n  }), o = (c) => re(c, t.value, n.value), f = p([]), l = p(!0);\n  async function _(c) {\n    const d = A(e.value, c);\n    await s.value.createDirectory(A(t.value, d));\n    const C = await a(d);\n    return f.value.push(C), C;\n  }\n  async function a(c, d = void 0) {\n    d = d ?? t.value;\n    const { data: C } = await s.value.stat(`${d}${c}`, {\n      details: !0\n    });\n    return o(C);\n  }\n  async function k() {\n    if (l.value = !0, r.value === \"favorites\")\n      f.value = await ie(s.value, e.value, t.value);\n    else if (r.value === \"recent\") {\n      const c = Math.round(Date.now() / 1e3) - 1209600, { data: d } = await s.value.search(\"/\", {\n        details: !0,\n        data: ne(c)\n      });\n      f.value = d.results.map(o);\n    } else {\n      const c = await s.value.getDirectoryContents(`${t.value}${e.value}`, {\n        details: !0,\n        data: se()\n      });\n      f.value = c.data.map(o), i.value && (f.value = f.value.filter((d) => d.path !== e.value));\n    }\n    l.value = !1;\n  }\n  return T([r, e], () => k()), z(() => k()), {\n    isLoading: l,\n    files: f,\n    loadFiles: k,\n    getFile: a,\n    createDirectory: _\n  };\n};\n/**\n * @copyright Copyright (c) 2023 Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @author Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nconst Ot = function(r) {\n  const e = u(() => r.value.map((t) => t.split(\"/\")));\n  return {\n    isSupportedMimeType: (t) => {\n      const n = t.split(\"/\");\n      return e.value.some(\n        ([s, o]) => (\n          // check mime type matches or is wildcard\n          (n[0] === s || s === \"*\") && (n[1] === o || o === \"*\")\n        )\n      );\n    }\n  };\n}, Zt = {\n  name: \"FilePicker\"\n}, Wt = /* @__PURE__ */ $({\n  ...Zt,\n  props: {\n    buttons: null,\n    name: null,\n    allowPickDirectory: { type: Boolean, default: !1 },\n    disabledNavigation: { type: Boolean, default: !1 },\n    container: { default: \"body\" },\n    filterFn: { default: void 0 },\n    mimetypeFilter: { default: () => [] },\n    multiselect: { type: Boolean, default: !0 },\n    path: { default: void 0 }\n  },\n  emits: [\"close\"],\n  setup(r, { emit: e }) {\n    const i = r, { isPublic: t } = D(), n = p(!0), s = u(() => (typeof i.buttons == \"function\" ? i.buttons(a.value, d.value, l.value) : i.buttons).map((w) => ({\n      ...w,\n      callback: () => {\n        o = !0, f(w.callback);\n      }\n    })));\n    let o = !1;\n    const f = async (v) => {\n      const w = a.value.length === 0 && i.allowPickDirectory ? [await S(d.value)] : a.value;\n      v(w), e(\"close\", w), o = !1;\n    }, l = p(\"files\"), _ = u(() => l.value === \"favorites\" ? y(\"Favorites\") : l.value === \"recent\" ? y(\"Recent\") : \"\"), a = p([]), k = p(window?.sessionStorage.getItem(\"NC.FilePicker.LastPath\") || \"/\"), c = p(), d = u({\n      // Only use the path for the files view as favorites and recent only works on the root\n      get: () => l.value === \"files\" ? c.value || i.path || k.value : \"/\",\n      /**\n       * Navigate to the new path and save it to the session storage\n       *\n       * @param path The new path\n       */\n      set: (v) => {\n        i.path === void 0 && window.sessionStorage.setItem(\"NC.FilePicker.LastPath\", v), c.value = v, a.value = [];\n      }\n    }), C = p(\"\"), { isSupportedMimeType: L } = Ot(Q(i, \"mimetypeFilter\")), { files: N, isLoading: I, loadFiles: x, getFile: S, createDirectory: g } = Et(l, d, t);\n    z(() => x());\n    const { showHiddenFiles: F } = G(), h = u(() => {\n      let v = N.value;\n      return F.value || (v = v.filter((w) => !w.basename.startsWith(\".\"))), i.mimetypeFilter.length > 0 && (v = v.filter((w) => w.type === \"folder\" || w.mime && L(w.mime))), C.value && (v = v.filter((w) => w.basename.toLowerCase().includes(C.value.toLowerCase()))), i.filterFn && (v = v.filter((w) => i.filterFn(w))), v;\n    }), m = u(() => l.value === \"files\" ? y(\"Upload some content or sync with your devices!\") : l.value === \"recent\" ? y(\"Files and folders you recently modified will show up here.\") : y(\"Files and folders you mark as favorite will show up here.\"));\n    return { __sfc: !0, props: i, emit: e, isPublic: t, isOpen: n, dialogButtons: s, isHandlingCallback: o, handleButtonClick: f, currentView: l, viewHeadline: _, selectedFiles: a, savedPath: k, navigatedPath: c, currentPath: d, filterString: C, isSupportedMimeType: L, files: N, isLoading: I, loadFiles: x, getFile: S, createDirectory: g, showHiddenFiles: F, filteredFiles: h, noFilesDescription: m, onCreateFolder: async (v) => {\n      try {\n        await g(v), ke(\"files:node:created\", N.value.filter((w) => w.basename === v)[0]);\n      } catch (w) {\n        console.warn(\"Could not create new folder\", { name: v, error: w }), R(y(\"Could not create the new folder\"));\n      }\n    }, handleClose: (v) => {\n      !v && !o && e(\"close\");\n    }, IconFile: W, FileList: ut, FilePickerBreadcrumbs: St, FilePickerNavigation: Ut, NcDialog: me, NcEmptyContent: ve, t: y };\n  }\n});\nvar Gt = function() {\n  var e = this, i = e._self._c, t = e._self._setupProxy;\n  return i(t.NcDialog, { attrs: { container: e.container, buttons: t.dialogButtons, name: e.name, size: \"large\", \"content-classes\": \"file-picker__content\", \"dialog-classes\": \"file-picker\", \"navigation-classes\": \"file-picker__navigation\", open: t.isOpen }, on: { \"update:open\": [function(n) {\n    t.isOpen = n;\n  }, t.handleClose] }, scopedSlots: e._u([{ key: \"navigation\", fn: function({ isCollapsed: n }) {\n    return [i(t.FilePickerNavigation, { attrs: { \"is-collapsed\": n, \"current-view\": t.currentView, \"filter-string\": t.filterString, \"disabled-navigation\": e.disabledNavigation }, on: { \"update:currentView\": function(s) {\n      t.currentView = s;\n    }, \"update:current-view\": function(s) {\n      t.currentView = s;\n    }, \"update:filterString\": function(s) {\n      t.filterString = s;\n    }, \"update:filter-string\": function(s) {\n      t.filterString = s;\n    } } })];\n  } }]) }, [i(\"div\", { staticClass: \"file-picker__main\" }, [t.currentView === \"files\" ? i(t.FilePickerBreadcrumbs, { attrs: { path: t.currentPath, \"show-menu\": e.allowPickDirectory }, on: { \"update:path\": function(n) {\n    t.currentPath = n;\n  }, \"create-node\": t.onCreateFolder } }) : i(\"div\", { staticClass: \"file-picker__view\" }, [i(\"h3\", [e._v(e._s(t.viewHeadline))])]), t.isLoading || t.filteredFiles.length > 0 ? i(t.FileList, { attrs: { \"allow-pick-directory\": e.allowPickDirectory, \"current-view\": t.currentView, files: t.filteredFiles, multiselect: e.multiselect, loading: t.isLoading, path: t.currentPath, \"selected-files\": t.selectedFiles, name: t.viewHeadline }, on: { \"update:path\": [function(n) {\n    t.currentPath = n;\n  }, function(n) {\n    t.currentView = \"files\";\n  }], \"update:selectedFiles\": function(n) {\n    t.selectedFiles = n;\n  }, \"update:selected-files\": function(n) {\n    t.selectedFiles = n;\n  } } }) : t.filterString ? i(t.NcEmptyContent, { attrs: { name: t.t(\"No matching files\"), description: t.t(\"No files matching your filter were found.\") }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n    return [i(t.IconFile)];\n  }, proxy: !0 }]) }) : i(t.NcEmptyContent, { attrs: { name: t.t(\"No files in here\"), description: t.noFilesDescription }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n    return [i(t.IconFile)];\n  }, proxy: !0 }]) })], 1)]);\n}, jt = [], Kt = /* @__PURE__ */ b(\n  Wt,\n  Gt,\n  jt,\n  !1,\n  null,\n  \"9def3ca4\",\n  null,\n  null\n);\nconst ui = Kt.exports;\nexport {\n  ui as default\n};\n"],"names":[],"sourceRoot":""}